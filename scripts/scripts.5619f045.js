"use strict";angular.module("banightonAdminApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angular-toArrayFilter","ngMessages","toggle-switch","validation.match","firebase","ng-file-model"]).constant("fire",{url:"https://clientsbnoapp.firebaseio.com"}).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/clients",{templateUrl:"views/clients.html",controller:"ClientsCtrl",controllerAs:"clients"}).when("/clients/new",{templateUrl:"views/new.html",controller:"NewCtrl",controllerAs:"new"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("banightonAdminApp").controller("MainCtrl",["$scope",function(a){a.submittedFile={},a.obj={},a.submit=function(a){console.log(JSON.stringify(a))},a.myData=new Firebase("https://clientsbnoapp.firebaseio.com/image"),a.submit=function(b){a.myData.push({clientLogo:a.obj.logo,clientImage:a.obj.image})},a.myData.on("value",function(b){a.imagenes=b.val(),"$apply"!==a.$root.$$phase&&"$digest"!==a.$root.$$phase&&a.$apply()})}]),angular.module("banightonAdminApp").controller("ClientsCtrl",["$rootScope","$scope","$http","$location","Password","$route",function(a,b,c,d,e,f){b.myData=new Firebase("https://clientsbnoapp.firebaseio.com/clients");var g=0;b.clients={},b.saveClient=function(a){a.id=g++,a.status=0,b.myData.push({client:a}),b.client.email="",b.client.password="",b.client.confirmPassword="",b.client.name="",b.client.address="",b.client.homePhone="",b.client.cellPhone="",b.client.music="",b.client.aniversary="",b.client.birthday="",b.client.website="",b.client.logo="",b.client.logoText="",b.client.image="",b.client.imageText="",b.clientForm.$setPristine(),b.clientForm.$setUntouched(),b.clientForm.$setValidity()},b.myData.on("value",function(a){b.clients=a.val(),g=a.numChildren(),"$apply"!==b.$root.$$phase&&"$digest"!==b.$root.$$phase&&b.$apply()}),b.$watch("client.password",function(a){b.passwordStrength=e.getStrength(a),b.isPasswordWeak()?b.clientForm.password.$setValidity("strength",!1):b.clientForm.password.$setValidity("strength",!0)}),b.isPasswordWeak=function(){return b.passwordStrength<40},b.isPasswordOk=function(){return b.passwordStrength>=40&&b.passwordStrength<=70},b.isPasswordStrong=function(){return b.passwordStrength>70},b.isInputValid=function(a){return a.$dirty&&a.$valid},b.isInputInvalid=function(a){return a.$dirty&&a.$invalid},b.musics=[],b.addMusic=function(){b.musics.push({inlineChecked:!1,question:"",questionPlaceholder:"more music",text:""})},b.removeMusic=function(a){b.musics.splice(a,1)},$(":file").filestyle({placeholder:"No file"}),b.eliminarArchivo=function(a){console.log(a),"logo"===a&&$("#logo").filestyle("clear"),"image"===a&&$("#image").filestyle("clear")}}]),angular.module("banightonAdminApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("banightonAdminApp").factory("Password",function(){function a(a){var b=0;if(!a)return b;for(var c={},d=0;d<a.length;d++)c[a[d]]=(c[a[d]]||0)+1,b+=5/c[a[d]];var e={digits:/\d/.test(a),lower:/[a-z]/.test(a),upper:/[A-Z]/.test(a),nonWords:/\W/.test(a)},f=0;for(var g in e)f+=e[g]===!0?1:0;return b+=10*(f-1),b>100&&(b=100),parseInt(b)}return{getStrength:function(b){return a(b)}}}),function(a){var b=0,c=function(b,c){this.options=c,this.$elementFilestyle=[],this.$element=a(b)};c.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle"),this.$elementFilestyle.remove()},disabled:function(a){if(a===!0)this.options.disabled||(this.$element.attr("disabled","true"),this.$elementFilestyle.find("label").attr("disabled","true"),this.options.disabled=!0);else{if(a!==!1)return this.options.disabled;this.options.disabled&&(this.$element.removeAttr("disabled"),this.$elementFilestyle.find("label").removeAttr("disabled"),this.options.disabled=!1)}},buttonBefore:function(a){if(a===!0)this.options.buttonBefore||(this.options.buttonBefore=!0,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(a!==!1)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=!1,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},icon:function(a){if(a===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(a!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find(".icon-span-filestyle").remove())}},input:function(a){if(a===!0)this.options.input||(this.options.input=!0,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.$elementFilestyle.find(".badge").remove(),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(a!==!1)return this.options.input;if(this.options.input){this.options.input=!1,this.$elementFilestyle.find(":text").remove();var b=this.pushNameFiles();b.length>0&&this.options.badge&&this.$elementFilestyle.find("label").append(' <span class="badge">'+b.length+"</span>"),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn")}}},size:function(a){if(void 0===a)return this.options.size;var b=this.$elementFilestyle.find("label"),c=this.$elementFilestyle.find("input");b.removeClass("btn-lg btn-sm"),c.removeClass("input-lg input-sm"),"nr"!=a&&(b.addClass("btn-"+a),c.addClass("input-"+a))},placeholder:function(a){return void 0===a?this.options.placeholder:(this.options.placeholder=a,void this.$elementFilestyle.find("input").attr("placeholder",a))},buttonText:function(a){return void 0===a?this.options.buttonText:(this.options.buttonText=a,void this.$elementFilestyle.find("label .buttonText").html(this.options.buttonText))},buttonName:function(a){return void 0===a?this.options.buttonName:(this.options.buttonName=a,void this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.buttonName}))},iconName:function(a){return void 0===a?this.options.iconName:void this.$elementFilestyle.find(".icon-span-filestyle").attr({"class":"icon-span-filestyle "+this.options.iconName})},htmlIcon:function(){return this.options.icon?'<span class="icon-span-filestyle '+this.options.iconName+'"></span> ':""},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"input-"+this.options.size)+'" placeholder="'+this.options.placeholder+'" disabled> ':""},pushNameFiles:function(){var a="",b=[];void 0===this.$element[0].files?b[0]={name:this.$element[0]&&this.$element[0].value}:b=this.$element[0].files;for(var c=0;c<b.length;c++)a+=b[c].name.split("\\").pop()+", ";return""!==a?this.$elementFilestyle.find(":text").val(a.replace(/\, $/g,"")):this.$elementFilestyle.find(":text").val(""),b},constructor:function(){var c=this,d="",e=c.$element.attr("id"),f="";""!==e&&e||(e="filestyle-"+b,c.$element.attr({id:e}),b++),f='<span class="group-span-filestyle '+(c.options.input?"input-group-btn":"")+'"><label for="'+e+'" class="btn '+c.options.buttonName+" "+("nr"==c.options.size?"":"btn-"+c.options.size)+'" '+(c.options.disabled?'disabled="true"':"")+">"+c.htmlIcon()+'<span class="buttonText">'+c.options.buttonText+"</span></label></span>",d=c.options.buttonBefore?f+c.htmlInput():c.htmlInput()+f,c.$elementFilestyle=a('<div class="bootstrap-filestyle input-group">'+d+"</div>"),c.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(a){return 13===a.keyCode||32===a.charCode?(c.$elementFilestyle.find("label").click(),!1):void 0}),c.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(c.$elementFilestyle),c.options.disabled&&c.$element.attr("disabled","true"),c.$element.change(function(){var a=c.pushNameFiles();0==c.options.input&&c.options.badge?0==c.$elementFilestyle.find(".badge").length?c.$elementFilestyle.find("label").append(' <span class="badge">'+a.length+"</span>"):0==a.length?c.$elementFilestyle.find(".badge").remove():c.$elementFilestyle.find(".badge").html(a.length):c.$elementFilestyle.find(".badge").remove()}),window.navigator.userAgent.search(/firefox/i)>-1&&c.$elementFilestyle.find("label").click(function(){return c.$element.click(),!1})}};var d=a.fn.filestyle;a.fn.filestyle=function(b,d){var e="",f=this.each(function(){if("file"===a(this).attr("type")){var f=a(this),g=f.data("filestyle"),h=a.extend({},a.fn.filestyle.defaults,b,"object"==typeof b&&b);g||(f.data("filestyle",g=new c(this,h)),g.constructor()),"string"==typeof b&&(e=g[b](d))}});return void 0!==typeof e?e:f},a.fn.filestyle.defaults={buttonText:"Choose file",iconName:"glyphicon glyphicon-folder-open",buttonName:"btn-default",size:"nr",input:!0,badge:!0,icon:!0,buttonBefore:!1,disabled:!1,placeholder:""},a.fn.filestyle.noConflict=function(){return a.fn.filestyle=d,this},a(function(){a(".filestyle").each(function(){var b=a(this),c={input:"false"===b.attr("data-input")?!1:!0,icon:"false"===b.attr("data-icon")?!1:!0,buttonBefore:"true"===b.attr("data-buttonBefore")?!0:!1,disabled:"true"===b.attr("data-disabled")?!0:!1,size:b.attr("data-size"),buttonText:b.attr("data-buttonText"),buttonName:b.attr("data-buttonName"),iconName:b.attr("data-iconName"),badge:"false"===b.attr("data-badge")?!1:!0,placeholder:b.attr("data-placeholder")};b.filestyle(c)})})}(window.jQuery),angular.module("banightonAdminApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/client.html","<h2>Client</h2>"),a.put("views/clients.html",'<div class="row mt80"> <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 animated fadeInDown"> <form name="clientForm" novalidate> <div class="form-group"> <label>Djs</label> <toggle-switch ng-model="switchStatus" on-label="<" off-label=">"> </toggle-switch> <label>Boliches</label> </div> <div class="form-group has-feedback" ng-class="{\'has-error\':clientForm.email.$dirty && clientForm.email.$invalid, \'has-success\':clientForm.email.$valid && clientForm.email.$dirty}"> <label for="email">Email</label> <input type="email" class="form-control" id="email" name="email" placeholder="Email" data-ng-model="client.email" required> <span class="glyphicon glyphicon-remove form-control-feedback" ng-show="clientForm.email.$dirty && clientForm.email.$invalid"></span> <span class="glyphicon glyphicon glyphicon-ok form-control-feedback" ng-show="clientForm.email.$valid && clientForm.email.$dirty"></span> </div> <p class="help-block" ng-show="clientForm.email.$dirty && clientForm.email.$error.required">Campo obligatorio</p> <p class="help-block" ng-show="clientForm.email.$dirty && clientForm.email.$error.email">Email invalido</p> <div class="form-group has-feedback" ng-class="{\'has-error\': isInputInvalid(clientForm.password), \'has-success\': isInputValid(clientForm.password)}"> <label for="password">Password</label> <input type="password" class="form-control" id="password" name="password" placeholder="Password" ng-model="client.password" required> <span class="glyphicon glyphicon-remove form-control-feedback" ng-show="clientForm.password.$dirty && clientForm.password.$invalid"></span> <span class="glyphicon glyphicon glyphicon-ok form-control-feedback" ng-show="clientForm.password.$valid && clientForm.password.$dirty"></span> <div class="progress" style="margin-top:5px"> <div class="progress-bar" ng-class="{\'progress-bar-success\': isPasswordStrong(), \'progress-bar-warning\': isPasswordOk(), \'progress-bar-danger\': isPasswordWeak()}" aria-valuenow="{{passwordStrength}}" aria-valuemin="0" aria-valuemax="100" style="width:{{passwordStrength}}%"> </div> </div> <p class="help-block" ng-show="clientForm.password.$dirty && clientForm.password.$error.required">Campo obligatorio</p> </div> <div class="form-group has-feedback" ng-class="{\'has-error\':clientForm.confirmPassword.$dirty && clientForm.confirmPassword.$error.match, \'has-success\':!clientForm.confirmPassword.$error.match && clientForm.confirmPassword.$dirty}"> <label for="confirmPassword">Confirm Password</label> <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm password" ng-model="client.confirmPassword" match="client.password" not-match="true"> <span class="glyphicon glyphicon-remove form-control-feedback" ng-show="clientForm.confirmPassword.$dirty && clientForm.confirmPassword.$error.match"></span> <span class="glyphicon glyphicon glyphicon-ok form-control-feedback" ng-show="!clientForm.confirmPassword.$error.match && clientForm.confirmPassword.$dirty"></span> </div> <div class="form-group"> <label for="name">Name</label> <input type="text" class="form-control" id="name" name="name" placeholder="Name" ng-model="client.name"> </div> <div class="form-group" ng-show="!switchStatus"> <label for="address">Address</label> <input type="text" class="form-control" id="address" name="address" placeholder="Address" ng-model="client.address"> </div> <div class="form-group has-feedback" ng-show="!switchStatus"> <label for="homePhone">Home Phone</label> <input type="text" class="form-control" id="homePhone" name="homePhone" placeholder="Home Phone" ng-model="client.homePhone"> </div> <div class="form-group"> <label for="cellPhone">Cell Phone</label> <input type="text" class="form-control" id="cellPhone" name="cellPhone" placeholder="Cell Phone" ng-model="client.cellPhone"> </div> <div class="form-group"> <label for="music">Music</label> <div class="input-group"> <input type="text" class="form-control" id="music" name="music" placeholder="Music" ng-model="client.music"> <span class="input-group-btn" style="top:-1px"> <button class="btn btn-default glyphicon glyphicon-plus" type="button" ng-click="addMusic()"></button> </span> </div> </div> <div class="form-group" ng-repeat="music in musics"> <div class="input-group"> <input type="text" class="form-control" id="musicMore" name="musicMore" placeholder="{{music.questionPlaceholder}}" ng-model="musicMore"> <span class="input-group-btn" style="top:-1px"> <button class="btn btn-default glyphicon glyphicon-remove btn-danger" type="button" ng-click="removeMusic($index)"></button> </span> </div> </div> <div class="form-group" ng-show="!switchStatus"> <label for="aniversary">Aniversary</label> <input type="text" class="form-control" id="aniversary" name="aniversary" placeholder="yyyy-mm-dd" ng-model="client.aniversary"> </div> <div class="form-group" ng-show="switchStatus"> <label for="birthday">Birthday</label> <input type="text" class="form-control" id="birthday" name="birthday" placeholder="yyyy-mm-dd" ng-model="client.birthday"> </div> <div class="form-group"> <label for="website">Website</label> <input type="url" class="form-control" id="website" name="website" placeholder="http://example.com" ng-model="client.website"> </div> <div class="form-group"> <label for="logo">logo <small>100x100</small></label> <div class="input-group"> <span class="input-group-btn" style="top:-1px"> <button class="btn btn-default glyphicon glyphicon-remove" type="button" ng-click="eliminarArchivo(\'logo\')"></button> </span> <input type="file" id="logo" name="logo" ng-file-model="client.logo" data-iconname="glyphicon glyphicon-inbox" accept="image/*"> </div> </div> <div class="form-group"> <label for="logotext">logotext</label> <input class="form-control" id="logotext" name="logotext" placeholder="logotext" ng-model="client.logoText"> </div> <div class="form-group"> <label for="imagen">imagen <small>400x600</small></label> <div class="input-group"> <span class="input-group-btn" style="top:-1px"> <button class="btn btn-default glyphicon glyphicon-remove" type="button" ng-click="eliminarArchivo(\'image\')"></button> </span> <input type="file" id="image" name="image" ng-file-model="client.image" data-iconname="glyphicon glyphicon-inbox" accept="image/*"> </div> </div> <div class="form-group"> <label for="imagenText">imagenText</label> <textarea type="text" class="form-control" id="imagenText" name="imagenText" placeholder="imagenText" rows="3" ng-model="client.imageText"></textarea> </div> <div class="form-group"> <div class="text-center"> <button data-loading-text="Saving Client..." type="submit" class="btn btn-save btn-block" ng-click="saveClient(client)" ng-disabled="clientForm.$invalid">Save Client</button> </div> </div> </form> </div> <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8 animated fadeInUp"> <div class="form-group"> <label for="search">Search</label> <input class="form-control" id="search" name="search" ng-model="search" placeholder="Search"> </div> <div class="table-responsive"> <table class="table table-bordered table-hover table-striped"> <thead> <tr> <th width="10%">#</th> <th width="30%">Name</th> <th width="30%">Address</th> <th width="30%">Email</th> </tr> </thead> <tbody> <tr ng-repeat="client in clients"> <th>{{client.client.id}}</th> <td>{{client.client.name}}</td> <td>{{client.client.address}}</td> <td>{{client.client.email}}</td> </tr> </tbody> </table> <nav> <ul class="pagination"> <li> <a href="#" aria-label="Previous"> <span aria-hidden="true">&laquo;</span> </a> </li> <li class="active"><a href="#">1</a></li> <li><a href="#">2</a></li> <li> <a href="#" aria-label="Next"> <span aria-hidden="true">&raquo;</span> </a> </li> </ul> </nav> </div> </div></div>'),a.put("views/main.html",'<h1>MAIN</h1> <form ng-submit="submit(obj)"> <input type="file" ng-file-model="obj.logo"> <input type="file" ng-file-model="obj.image"> <input type="submit" value="submit" accept="image/*"> </form> <div ng-repeat="imagen in imagenes"> <img ng-src="{{imagen.clientLogo.data}}" alt="{{imagen.clientLogo.name}}"> <img ng-src="{{imagen.clientImage.data}}" alt="{{imagen.clientImage.name}}"> <div>{{imagen.clientLogo.name}}</div> <div>{{imagen.clientImage.name}}</div> </div>')}]);